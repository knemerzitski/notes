################################ NoteShare ################################
extend type Note {
  "Note is shared through this access"
  shareAccess: NoteShareAccess
}

extend type NotePatch {
  "Changes made to note sharing"
  shareAccess: NoteShareAccessPatch
}

type NoteShareAccess {
  "Note is accessible by this id"
  id: ObjectID!
  "Access to note through this share is read-only. Read-only note cannot be modified."
  readOnly: Boolean!
}

type NoteShareAccessPatch {
  "This patch applies to NoteShareAccess.id"
  id: ObjectID!
  "True if NoteShareAccess has been deleted"
  deleted: Boolean
}

################################ Create NoteShareAccess ################################

input ShareNoteInput {
  "Note to be shared, Note.id"
  noteId: String!
  "Make access to note read-only"
  readOnly: Boolean!
}

type ShareNotePayload {
  "Note sharing access info"
  shareAccess: NoteShareAccess!
  "Note where new share access has been added"
  note: Note!
}

extend type Mutation {
  "Share existing note"
  shareNote(input: ShareNoteInput!): ShareNotePayload! @auth
}

################################ Delete NoteShareAccess ################################

input DeleteNoteShareInput {
  "Note to to stop sharing, Note.id"
  noteId: String!
}

type DeleteNoteSharePayload {
  "Id of deleted NoteShareAccess.id"
  shareAccessId: ObjectID!
  "Note with shareAccess deleted"
  note: Note!
}

extend type Mutation {
  "Delete shared note. Existing access is users is kept."
  deleteNoteShare(input: DeleteNoteShareInput!): DeleteNoteSharePayload! @auth
}

################################ Link Note by ShareNoteAccess ################################

input CreateNoteLinkByShareAccessInput {
  "Create NoteUserLink by NoteShareAccess.id"
  shareAccessId: String!
}

type CreateNoteLinkByShareAccessPayload {
  "Created UserNoteLink by the share access"
  userNoteLink: UserNoteLink!
}

extend type Mutation {
  "Add a link to an existing note for collaborative editing"
  createNoteLinkByShareAccess(
    input: CreateNoteLinkByShareAccessInput!
  ): CreateNoteLinkByShareAccessPayload! @auth
}
