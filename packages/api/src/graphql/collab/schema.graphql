scalar Changeset

type RevisionChangeset {
  "Revision number"
  revision: NonNegativeInt!
  "A set of text changes"
  changeset: Changeset!
}

input RevisionChangesetInput {
  "Changeset applies to text at this revision"
  revision: NonNegativeInt!
  "New changes to be applied to text"
  changeset: Changeset!
}

type CollabTextSelectionRange {
  "Start index of selection"
  start: NonNegativeInt!
  "End index of selection. If null then start === end."
  end: NonNegativeInt
}

input CollabTextSelectionRangeInput {
  "Start index of selection"
  start: NonNegativeInt!
  "End index of selection. If null then start === end."
  end: NonNegativeInt
}

type CollabTextRecord implements Node {
  "Self-descriptive"
  id: ID!
  "User who created this record"
  creatorUserId: String!
  "Changes of the record"
  change: RevisionChangeset!
  "Selection before changeset is composed"
  beforeSelection: CollabTextSelectionRange!
  "Selection after changeset is composed"
  afterSelection: CollabTextSelectionRange!
}

input CollabTextRecordInput {
  "Randomly generated string by client"
  generatedId: String!
  "Change to be made on the text"
  change: RevisionChangesetInput!
  "Selection before change is composed"
  beforeSelection: CollabTextSelectionRangeInput!
  "Selection after change is composed"
  afterSelection: CollabTextSelectionRangeInput!
}
type CollabText {
  "Self-descriptive"
  id: ID!
  "Latest revision of this text."
  headText: RevisionChangeset!
  "Oldest available revision of this text. tailText.compose(...records) => headText"
  tailText: RevisionChangeset!
  "A list of records containing all changes made to the text"
  recordsConnection(
    first: PositiveInt
    after: NonNegativeInt
    last: PositiveInt
    before: NonNegativeInt
  ): CollabTextRecordConnection!
}

input CreateCollabTextInput {
  "Self-descriptive"
  initialText: String
}

type CollabTextPatch {
  "New record added to text"
  newRecord: CollabTextRecord
}

input CollabTextPatchInput {
  "new record to added to the text"
  insertRecord: CollabTextRecordInput
}

type CollabTextRecordConnection implements Connection {
  "Records directly without edges"
  records: [CollabTextRecord]!
  "Self descriptive"
  edges: [CollabTextRecordEdge]!
  "Self descriptive"
  pageInfo: PageInfo!
}

type CollabTextRecordEdge implements Edge {
  "Self descriptive"
  node: CollabTextRecord!
  "Self descriptive"
  cursor: Cursor!
}
