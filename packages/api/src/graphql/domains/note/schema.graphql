################################ Note ################################

"""
TODO desc
"""
type Note {
  """
  Self-descriptive
  """
  id: ObjectID!
}

"""
TODO desc
"""
input NoteByInput @oneOf {
  """
  Note.id
  """
  id: ObjectID
}

extend type SignedInUser {
  """
  Direct access to note without link
  """
  note(by: NoteByInput!): Note!
}

################################ Mutation createNote ################################

"""
TODO desc
"""
input CreateNoteInput {
  """
  User who will own and have access to the note.
  """
  user: SignedInUserByInput!
}

"""
TODO desc
"""
type CreateNotePayload {
  """
  TODO desc
  """
  note: Note!
}

extend type Mutation {
  """
  Create a new note
  """
  createNote(input: CreateNoteInput!): CreateNotePayload!
}

extend union SignedInUserMutation = CreateNotePayload

################################ Mutation deleteNote ################################

"""
TODO desc
"""
input DeleteNoteInput {
  """
  Note to be deleted by Note.id
  """
  noteId: ObjectID!
}

"""
TODO desc
"""
type DeleteNotePayload {
  """
  Deleted Note.id
  """
  noteId: ObjectID
}

extend type Mutation {
  """
  Deletes note for oldest user (cannot be undone). Newer users can only unlink the note.
  """
  deleteNote(input: DeleteNoteInput!): DeleteNotePayload! @auth
}

extend union SignedInUserMutation = DeleteNotePayload
